<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
	<title>test</title>
	<script src="../lib/echarts.js"></script>
    <script src="../lib/hammer.min.js"></script>
</head>
<body>
    <div id="mask" style="width:400px;height:400px;background: silver;opacity:0;position: absolute;z-index:-1"></div>
	<div id="main" style="width:400px;height:400px"></div>
	<script type="text/javascript">

        var mydata={
            moveline: 0,
            lineX: 10,
            mouseX: -1
        }
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var main = document.getElementById('main');
        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '液压系统'
            },
            tooltip: {},
            legend: {
                data:['液压1']
            },
            grid: {
            	show: true,
            },
            xAxis: {
                type: 'value',
                max:24,
                axisTick:{
                	show: false,
                },
                axisLabel:{
                	margin: 15,
                    formatter: function(value, index){
                        var head = Math.floor(value);
                        var tail = (value - head)*60;
                        if(Math.floor(tail)<10){
                            var tailString = '0'+Math.floor(tail).toString();
                        }else{
                            var tailString = Math.floor(tail).toString();
                        }
                        return head.toString() + ':'+tailString;
                    }
                },
                splitLine: {
            		show: true
        		}
            },
            yAxis: [
                {
                	type: 'value',
            		axisLabel: {
                		formatter: function(value, index){
                			switch(value){
                				case 25:
                					return '25%';
                				case 50:
                					return '50%';
                				case 75:
                					return '75%';
                				case 100:
                					return '100%';
                				default:
                					return '';
                			}
                		}
            		},
            		axisTick:{
                    	show: false,
                    },
                    interval: 5,
            		min: 0,
            		max: 100,
            		splitLine: {
                		show: true,
                		lineStyle: {
    				        // 使用深浅的间隔色
    				        color: ['#ccc', '#fff']
    				    }
            		}
                },
                {
                    type: 'value',
                    axisTick:{
                        show: false,
                    },
                    interval: 10,
                    max: 100,
                    min:0,
                }
            ],
            
            animation: false,
            series: [
	            {
	                name: '液压1',
	                type: 'line',
	                smooth: true,
	                symbolSize: 1,
	                hoverAnimation: false,
	                markLine: {
	                	label: {
                            normal: {
                                show: false,
                            }
                        },
	                	lineStyle: {
	                		normal: {
                                width: 2,
	                			type: 'solid',
	                		}
	                	},
                        symbol: ['triangle','pin'],
                        symbolSize: [0],
            			data: [
		            		{
                                name: '辅助线1',
                                xAxis: 13,
                            },
                            {
                                name: '辅助线2',
                                xAxis: 6, 
                            }
            			]
            		},
            		markPoint: {
            			data: [
		            		{
		            			name: '最大值',
		            			type: 'max'
		            		}
            			]
            		},
	                data: [
	                	[0,13],[1,19],
	                	{
	                		value:[2,16],
	                		symbolSize: 10
	                	},
	                	[3,15],[5,23],[17,27],[24,53]
	                ]
	            }
            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);

        myChart.on('mousedown',function(param) {
            document.getElementById('test').textContent = 'down';
        	if(param.name =='辅助线1'){
                mydata.mouseX = event.clientX;
                mydata.moveline = 1;
                mydata.lineX = option.series[0].markLine.data[0].xAxis;
                
            }
        })

        myChart.on('mouseup',function(param) {
            mydata.mouseX = -1;
            mydata.moveline = 0;
            console.log('up');
        })
        main.onmouseup = function(){
            mydata.mouseX = -1;
            mydata.moveline = 0;
            document.getElementById('test').textContent = "up";
        }
        main.onmousemove = function(){
            document.getElementById('test').textContent = "move";
            if(mydata.moveline == 1){
                option.series[0].markLine.data[0].xAxis = (event.clientX - mydata.mouseX)/13 + mydata.lineX;
                if(option.series[0].markLine.data[0].xAxis>24){
                  option.series[0].markLine.data[0].xAxis=24;  
                }
                if(option.series[0].markLine.data[0].xAxis<0){
                  option.series[0].markLine.data[0].xAxis=0;  
                }
                myChart.setOption(option);
            }
        }
        
        
    </script>
</body>
</html>